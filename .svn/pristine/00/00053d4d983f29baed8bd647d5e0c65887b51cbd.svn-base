<?php if (!defined('THINK_PATH')) exit();?>
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>APT安全威胁感知系统</title>

		<meta name="description" content="overview &amp; stats" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
         <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta http-equiv="cache-control" content="max-age=0" />
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="expires" content="0" />
		<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
		<meta http-equiv="pragma" content="no-cache" />

		 <!-- basic styles -->

         <link rel="stylesheet" href="/APT/Public/css/assets/css/bootstrap.min.css"  />
         <link rel="stylesheet" href="/APT/Public/css/assets/css/font-awesome.min.css" />
        <!--[if IE 7]>
          <link rel="stylesheet" href="/APT/Public/css/assets/css/font-awesome-ie7.min.css" />
        <![endif]-->

        <!-- page specific plugin styles -->
        <link rel="stylesheet" href="/APT/Public/css/assets/css/jquery-ui-1.10.3.custom.min.css" />
        <link rel="stylesheet" href="/APT/Public/css/assets/css/chosen.css" />
        <link rel="stylesheet" href="/APT/Public/css/assets/css/datepicker.css" />
        <link rel="stylesheet" href="/APT/Public/css/assets/css/bootstrap-timepicker.css" />
        <link rel="stylesheet" href="/APT/Public/css/bootstrap-duallistbox.css" />
        <link rel="stylesheet" href="/APT/Public/css/prettify.css" />

       <!-- <link rel="stylesheet" href="/APT/Public/css/assets/css/daterangepicker.css" /> -->
        <link rel="stylesheet" href="/APT/Public/css/assets/css/colorpicker.css" />

        <!-- fonts -->

        <link rel="stylesheet" href="/APT/Public/css/assets/css/ace-fonts.css" />

        <!-- ace styles -->

        <link rel="stylesheet" href="/APT/Public/css/assets/css/ace.min.css" />
        <link rel="stylesheet" href="/APT/Public/css/assets/css/ace-rtl.min.css" />
        <link rel="stylesheet" href="/APT/Public/css/assets/css/ace-skins.min.css" />
        <link rel="stylesheet" href="/APT/Public/css/assets/css/jquery.ipaddress.css" />
        <link rel="stylesheet" href="/APT/Public/css/daterangepicker-bs3.css" />
		<link rel="stylesheet" href="/APT/Public/css/assets/css/datetimepicker/datetimepicker.min.css" />
        
        
        <!--[if lte IE 8]>
          <link rel="stylesheet" href="/APT/Public/css/assets/css/ace-ie.min.css" />
        <![endif]-->

        <!-- inline styles related to this page -->
        
        
		<link href="/APT/Public/css/assets/style/common.css" rel="stylesheet">
        <link href="/APT/Public/css/assets/style/file.css" rel="stylesheet">
        

       <!-- <link type="text/css" rel="stylesheet" href="/APT/Public/css/assets/css/tree/font-awesome.min.css">-->
        <link type="text/css" rel="stylesheet" href="/APT/Public/css/assets/css/goal-thermometer/goal-thermometer.css"> 
        <link rel="stylesheet" href="/APT/Public/css/assets/css/ztreecss/zTreeStyle/zTreeStyle.css" type="text/css">
          <link rel="stylesheet" href="/APT/Public/css/uploadfile.css" >
          
          
          <link href="/APT/Public/css/assets/style/main.css" rel="stylesheet">

		<script>
		var GV = {
		DIMAUB: "/APT/Public/",
		JS_ROOT: "css/assets/",
		TOKEN: ""
		};
		</script>

		<script src="/APT/Public/css/assets/js/tree/jquery.js"></script>
        <script src="/APT/Public/css/assets/js/tree/wind.js"></script>
        <script src="/APT/Public/css/assets/js/ace-extra.min.js"></script>

        <!--<script src="/APT/Public/css/assets/js/highcharts/highcharts.js"></script>-->
    <script src="/APT/Public/css/assets/js/highcharts/highstock.js"></script>
    <script src="/APT/Public/css/assets/js/highcharts/highcharts-more.js"></script>
    <script src="/APT/Public/css/assets/js/highcharts/solid-gauge.js"></script>
    <script src="/APT/Public/css/assets/js/highcharts/highcharts-3d.js"></script>
    <script src="/APT/Public/css/assets/js/highcharts/no-data-to-display.js"></script>
    <!-- <script src="/APT/Public/Highcharts-5.0.6/code/modules/exporting.js"></script>  -->
    <script src="/APT/Public/js/jquery.uploadfile.min.js"></script>





        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

        <!--[if lt IE 9]>
        <script src="/APT/Public/css/assets/js/html5shiv.js"></script>
        <script src="/APT/Public/css/assets/js/respond.min.js"></script>
        <![endif]-->

	</head>

	<body class="skin-1" style="min-width:1010px;">
		<div class="navbar "  id="navbar">
			<script type="text/javascript">
				try{ace.settings.check('navbar' , 'fixed')}catch(e){}
			</script>

			<div class="navbar-container" id="navbar-container"  style="min-width:1010px;">

               <span class="aptLogo"> APT安全威胁感知系统</span>
                <!--<img src="/APT/Public/css/assets/images/logo.png" class="floatLeft">-->
			<div  class="Toptitle">
            	<h3 class="floatLeft"></h3>
                <span class="floatRig">
                	
                    <!--<a href="/APT/index.php/System/password_edit"><img src="/APT/Public/css/assets/images/iconTop03.png" title="修改密码"></a>
                    <?php echo authcheck('Home/Setting/setting','
                    <a href="/APT/index.php/System/setting"><img src="/APT/Public/css/assets/images/iconTop05.png" title="配置"></a>
                    ','');?>
                    <a href="<?php echo U('Login/logout');?>" class="noborder"><img src="/APT/Public/css/assets/images/iconTop04.png" title="退出"> </a>
                    -->
                    <label><input type="text" class="allSearch" placeholder="搜索..."><a href="#" title="全站搜索"><i class="icon-search"></i></a></label>
                    
                    <a href="/APT/index.php/Main/main" title="首页"><i class="icon-home font16"></i></a>
                    <a href="#" title="告警"><i class="icon-bell-alt font14"></i></a>
                    <a href="#" data-toggle="dropdown" title="系统"><i class="icon-user font14"></i><i class="icon-caret-down font12"></i></a>
                    <ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close topSetting" style="padding:0px;">
								<li>
										<a href="#"><?php echo (session('username')); ?></a>
									
								</li>

								<li>
									<a href="/APT/index.php/System/password_edit">
										修改密码
									</a>
								</li>

								<li class="divider"></li>

								<li>
									<a  href="<?php echo U('Login/logout');?>" class="noborder">
										退出
									</a>
								</li>
							</ul>
                </span>
           </div>
                

			</div><!-- /.container -->
		</div>

		<div class="main-container" id="main-container" style="min-width:1010px;">
			<script type="text/javascript">
				try{ace.settings.check('main-container' , 'fixed')}catch(e){}
			</script>

			<div class="main-container-inner" style="min-width:1010px;">
				<a class="menu-toggler" id="menu-toggler" href="#">
					<span class="menu-text"></span>
				</a>

				<div class="sidebar menu-min" id="sidebar">
					<script type="text/javascript">
						try{ace.settings.check('sidebar' , 'fixed')}catch(e){}
					</script>
					<ul class="nav nav-list">
                         <li <?php if($controller == 'Urgent'): ?>class="active open"<?php endif; ?>>
                        	<?php if(authcheck('Home/Urgent/index,','1','')): ?><a href="#" class="dropdown-toggle">
								<i class=" icon-bolt "></i>
								<span class="menu-text"> 紧急事件 </span>

								<b class="arrow icon-angle-down"></b>
							</a>

							<ul class="submenu">
								<li <?php if(($action) == "index"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Urgent/index','
									<a href="/APT/index.php/Urgent/index">
										<i class="icon-double-angle-right"></i>
                                        紧急事件
									</a>
									','');?>
								</li>
                                <!--
								<li <?php if(($action) == "index_web"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Vir/index_web','
									<a href="/APT/index.php/Vir/index_web">
										<i class="icon-double-angle-right"></i>
										WEB攻击
									</a>
									','');?>
								</li>
								<li <?php if(($action) == "index_inv"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Vir/index_inv','
									<a href="/APT/index.php/Vir/index_inv">
										<i class="icon-double-angle-right"></i>
										入侵事件
									</a>
									','');?>
								</li>
								<li <?php if(($action) == "index_vir"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Vir/index_vir','
									<a href="/APT/index.php/Vir/index_vir">
										<i class="icon-double-angle-right"></i>
										病毒事件
									</a>
									','');?>
								</li>
								<li <?php if(($action) == "search"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Vir/search','
									<a href="/APT/index.php/Vir/search">
										<i class="icon-double-angle-right"></i>
										统计查询
									</a>
									','');?>
								</li>
                                -->
							</ul><?php endif; ?>
						</li>
                        
               
                        <li <?php if($controller == 'Safe'): ?>class="active open"<?php endif; ?>>
                        	<?php if(authcheck('Home/Safe/index,Home/Safe/file,Home/Safe/bruteforce,Home/Safe/malicioust,Home/Safe/scanevent','1','')): ?><a href="#" class="dropdown-toggle">
								<i class=" icon-medkit" style="font-size:14px;"></i>
								<span class="menu-text"> 安全事件 </span>

								<b class="arrow icon-angle-down"></b>
							</a>
                           

							<ul class="submenu">
								<li  <?php if(($action) == "index"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Safe/index','
									<a href="/APT/index.php/Safe/index">
										<i class="icon-double-angle-right"></i>
									    http流量检测
									</a>
									','');?>
								</li>
                                <li  <?php if(($action) == "file"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Safe/file','
									<a href="/APT/index.php/Safe/file">
										<i class="icon-double-angle-right"></i>
									    文件威胁检测
									</a>
									','');?>
								</li>
                                <li  <?php if(($action) == "bruteforce"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Safe/bruteforce','
									<a href="/APT/index.php/Safe/bruteforce">
										<i class="icon-double-angle-right"></i>
									    恶意流量检测
									</a>
									','');?>
								</li>
                                <li  <?php if(($action) == "malicioust"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Safe/malicioust','
									<a href="/APT/index.php/Safe/malicioust">
										<i class="icon-double-angle-right"></i>
									    暴力破解
									</a>
									','');?>
								</li>
                                <li  <?php if(($action) == "scanevent"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Safe/scanevent','
									<a href="/APT/index.php/Safe/scanevent">
										<i class="icon-double-angle-right"></i>
									    扫描事件
									</a>
									','');?>
								</li>
                                
                                
							</ul><?php endif; ?>
						</li>
                        <li <?php if($controller == 'User'): ?>class="active open"<?php endif; ?>>
                        	<?php if(authcheck('Home/User/user,Home/User/usergroup','1','')): ?><a href="#" class="dropdown-toggle">
								<i class="icon-user" style="font-size:16px;"></i>
								<span class="menu-text"> 权限管理 </span>

								<b class="arrow icon-angle-down"></b>
							</a>

							<ul class="submenu">
								<li <?php if(($action) == "user"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/User/user','
									<a href="/APT/index.php/User/user">
										<i class="icon-double-angle-right"></i>
										用户管理
									</a>
									','');?>
								</li>
								
                                <li <?php if(($action) == "usergroup"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/User/usergroup','
									<a href="/APT/index.php/User/usergroup">
										<i class="icon-double-angle-right"></i>
										用户组管理
									</a>
									','');?>
								</li>
								
								
							</ul><?php endif; ?>
						</li>
                       
						<li <?php if($controller == 'Log'): ?>class="active open"<?php endif; ?>>
							<?php if(authcheck('Home/Log/index','1','')): ?><a href="#" class="dropdown-toggle">
								<i class=" icon-calendar " style="font-size:14px;"></i>
								<span class="menu-text"> 日志管理 </span>

								<b class="arrow icon-angle-down"></b>
							</a>

							<ul class="submenu">
								<li  <?php if(($action) == "index"): ?>class="active"<?php endif; ?>>
									<a href="<?php echo U('Log/index');?>">
										<i class="icon-double-angle-right"></i>
										日志管理
									</a>
								</li>
							</ul><?php endif; ?> 
						</li>
                        <li <?php if($controller == 'Setting'): ?>class="active open"<?php endif; ?>>
                        	<?php if(authcheck('Home/Setting/index,Home/Setting/ugevent,Home/Setting/safereportset,','1','')): ?><a href="#" class="dropdown-toggle">
								<i class="icon-cog" style="font-size:14px;"></i>
								<span class="menu-text"> 设置 </span>

								<b class="arrow icon-angle-down"></b>
							</a>

							<ul class="submenu">
								<li <?php if(($action) == "index"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Setting/index','
									<a href="/APT/index.php/Setting/index">
										<i class="icon-double-angle-right"></i>
										安全报表推送
									</a>
									','');?>
								</li>
                                <li <?php if(($action) == "ugevent"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Setting/ugevent','
									<a href="/APT/index.php/Setting/ugevent">
										<i class="icon-double-angle-right"></i>
										紧急事件推送
									</a>
									','');?>
								</li>
                                <li <?php if(($action) == "safereportset"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/Setting/safereportset','
									<a href="/APT/index.php/Setting/safereportset">
										<i class="icon-double-angle-right"></i>
										安全报表模板设置
									</a>
									','');?>
								</li>
							</ul><?php endif; ?>
						</li>
                         <li <?php if($controller == 'User'): ?>class="active open"<?php endif; ?>>
                        	<?php if(authcheck('Home/User/user,Home/User/usergroup','1','')): ?><a href="#" class="dropdown-toggle">
								<i class="icon-bell-alt" style="font-size:13px;"></i>
								<span class="menu-text"> 告警检索 </span>

								<b class="arrow icon-angle-down"></b>
							</a>

							<ul class="submenu">
								<li <?php if(($action) == "user"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/User/user','
									<a href="/APT/index.php/User/user">
										<i class="icon-double-angle-right"></i>
										告警检索
									</a>
									','');?>
								</li>
								
								
								
							</ul><?php endif; ?>
						</li>
                         <li <?php if($controller == 'Setting'): ?>class="active open"<?php endif; ?>> 
                        <?php if(authcheck('Home/Setting/update','1','')): ?><a href="#" class="dropdown-toggle">  
                                <i class=" icon-pushpin" style=""></i> 
                                <span class="menu-text">追踪溯源 </span>  
                                   
                                <b class="arrow icon-angle-down"></b>  
                                </a> 
                                <ul class="submenu"> 
	                                <li  <?php if(($action) == "update"): ?>class="active"<?php endif; ?>>
		                                <?php echo authcheck('Home/Setting/update','  
		                                <a href="/APT/index.php/Setting/update">  
		                                <i class="icon-double-angle-right"></i>  
		                                追踪溯源  
		                                </a>
		                                ','');?>  
	                                </li>
                                
                                </ul><?php endif; ?>
                        
                        </li> 
                         <li <?php if($controller == 'Setting'): ?>class="active open"<?php endif; ?>> 
                        <?php if(authcheck('Home/Setting/update','1','')): ?><a href="#" class="dropdown-toggle">  
                                <i class=" icon-facetime-video" style="font-size:13px;"></i> 
                                <span class="menu-text">应用监控 </span>  
                                   
                                <b class="arrow icon-angle-down"></b>  
                                </a> 
                                <ul class="submenu"> 
	                                <li  <?php if(($action) == "update"): ?>class="active"<?php endif; ?>>
		                                <?php echo authcheck('Home/Setting/update','  
		                                <a href="/APT/index.php/Setting/update">  
		                                <i class="icon-double-angle-right"></i>  
		                                应用监控  
		                                </a>
		                                ','');?>  
	                                </li>
                                
                                </ul><?php endif; ?>
                        
                        </li> 
                        





                         
                        
                       <!-- <li <?php if($controller == 'User'): ?>class="active open"<?php endif; ?>>
                        	<?php if(authcheck('Home/User/user,Home/User/usergroup','1','')): ?><a href="#" class="dropdown-toggle">
								<i class="icon-user" style="font-size:16px;"></i>
								<span class="menu-text"> 日志管理 </span>

								<b class="arrow icon-angle-down"></b>
							</a>

							<ul class="submenu">
								<li <?php if(($action) == "user"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/User/user','
									<a href="/APT/index.php/User/user">
										<i class="icon-double-angle-right"></i>
										操作日志管理
									</a>
									','');?>
								</li>
								
							</ul><?php endif; ?>
						</li>
                        -->
                        
                       
                        <li <?php if($controller == 'User'): ?>class="active open"<?php endif; ?>>
                        	<?php if(authcheck('Home/User/user,Home/User/usergroup','1','')): ?><a href="#" class="dropdown-toggle">
								<i class="icon-bar-chart" style="font-size:13px;"></i>
								<span class="menu-text"> 访问分析 </span>

								<b class="arrow icon-angle-down"></b>
							</a>

							<ul class="submenu">
								<li <?php if(($action) == "user"): ?>class="active"<?php endif; ?>>
									<?php echo authcheck('Home/User/user','
									<a href="/APT/index.php/User/user">
										<i class="icon-double-angle-right"></i>
										访问分析
									</a>
									','');?>
								</li>
								
								
								
							</ul><?php endif; ?>
						</li>
                        
                        
						<!--<li <?php if($controller == 'System'): ?>class="active open"<?php endif; ?>>
							<?php if(authcheck('Home/System/setting','1','')): ?><a href="#" class="dropdown-toggle">
								<i class=" icon-cog " style="font-size:14px;"></i>
								<span class="menu-text"> 系统管理 </span>

								<b class="arrow icon-angle-down"></b>
							</a>

							<ul class="submenu">
								<li  <?php if(($action) == "setting"): ?>class="active"<?php endif; ?>>
									<a href="<?php echo U('System/setting');?>">
										<i class="icon-double-angle-right"></i>
										系统设置
									</a>
								</li>
							</ul><?php endif; ?> 
						</li>
                        -->
					</ul>
                    <div class="sidebar-collapse" id="sidebar-collapse">
						<i class="icon-double-angle-left" data-icon1="icon-double-angle-left" data-icon2="icon-double-angle-right"></i>
					</div>
					<script type="text/javascript">
						try{ace.settings.check('sidebar' , 'collapsed')}catch(e){}
						var locaHref=window.location.href;  
						var reg=/Main\/main/  
						if(reg.test(locaHref)==true){  
							$("#sidebar").addClass('menu-min')  
							$("#sidebar-collapse").remove()  
						}else{  
							$("#sidebar").removeClass('menu-min')  
						}  
						$(document).ready(function(){
							var check_status = function(){
						        $.post("/APT/index.php/System/check_status",'',function(data){
							        if(data.status=='out_time') {
							            window.location.reload();
							        }
						        });
						    }
						    setInterval(check_status,3000);
						});	 
					</script>

					
				</div>


<div class="main-content">
    <div id="addNet" class="popLayer">
        <div class="breadcrumbs">
            <ul class="breadcrumb">
                <li>添加设备</li>
            </ul>
            <!-- .breadcrumb -->
            <span class="floatRig closePop">关闭</span>
        </div>
        <div class="col-sm-12">
            <div class="row">
                <div class="col-xs-win">
                    <!-- PAGE CONTENT BEGINS -->
                    <form id="addNet_form" style="position:relative;margin-top:20px;"  class="form-horizontal" role="form">
                    
                        <div class="form-group">

                            <label class="col-sm-3 control-label no-padding-right"> IP：</label>

                            <div class="col-sm-9">
                                <input type="text" name="equipment_ip" pattern="^[1-9]{1}\d{0,2}.\d{1,3}.\d{1,3}.\d{1,3}$" title="请输入正确格式的IP地址"  class="col-xs-10 col-sm-5" required/>
                            </div>
                        </div>

                        <div class="form-group">

                            <label class="col-sm-3 control-label no-padding-right"> 设备名称：</label>

                            <div class="col-sm-9">
                                <input type="text" name="equipment_name" class="col-xs-10 col-sm-5" pattern="^\S{0,16}$"  title="请输入小于16位汉字或字符" required/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label no-padding-right">引擎类型：</label>
                            <div class="col-sm-9">
                            
                                <select name="equipment_type" class="equipment_type">      
                                    <option value=""></option>                  
                                <?php foreach($equipment_type as $key => $val): ?>
                                    <option value="<?= $val ?>"><?= $val ?></option>
                                <?php endforeach; ?>
                                  
                                </select>
                            </div>
                        </div>

                        <div class="space-4"></div>
                        <!--
                        <div class="form-group">
                            <label class="col-sm-3 control-label no-padding-right">设备组：</label>

                            <div class="col-sm-9">
                                <select name="netgroup">
                                    <?php if(is_array($groups)): $i = 0; $__LIST__ = $groups;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$groups_vo): $mod = ($i % 2 );++$i;?><option value="<?php echo ($groups_vo['id']); ?>"><?php echo ($groups_vo['name']); ?></option><?php endforeach; endif; else: echo "" ;endif; ?>
                                </select>
                            </div>
                        </div>
                         -->
                        <!-- <div class="form-group">

                            <label class="col-sm-3 control-label no-padding-right">网元IP：</label>

                            <div class="col-sm-9">
                                <input type="text" name="ip" class="col-xs-10 col-sm-5"/>
                            </div>
                        </div> -->

                       


                        <!-- <input type="hidden" name="id" value="<?php echo ($template_data['id']); ?>" /> -->
                        <div class="clearfix form-actions">
                            <div>
                                <button class="btn btn-info" type="submit">
                                    <i class="icon-ok bigger-110"></i>
                                    提交
                                </button>

                                &nbsp; &nbsp; &nbsp;
                                <button class="btn" type="reset">
                                    <i class="icon-undo bigger-110"></i>
                                    取消
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
    </div>
    <div id="editeNet" class="popLayer">
        <div class="breadcrumbs">
            <ul class="breadcrumb">
                <li>编辑设备</li>
            </ul>
            <!-- .breadcrumb -->
            <span class="floatRig closePop">关闭</span>
        </div>
        <div class="col-sm-12">
            <div class="row">
                <div class="col-xs-win">
                    <!-- PAGE CONTENT BEGINS -->
                    <form id="netedite_form" style="position:relative;top:20px;" class="form-horizontal" role="form"> 
                    <input type="hidden" name="id" id="id">                       
                        <div class="space-4"></div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label no-padding-right">设备名称：</label>
                            <div class="col-sm-9">
                                <input  type="text" name="equipment_name" class="col-xs-10 col-sm-5" pattern="^\S{0,16}$"  title="请输入小于16位汉字或字符" required/>
                            </div>
                        </div>                        
                        <div class="space-4"></div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label no-padding-right">IP地址：</label>
                            <div class="col-sm-9">
                                <input  type="text" pattern="^[1-9]{1}\d{0,2}.\d{1,3}.\d{1,3}.\d{1,3}$" title="请输入正确格式的IP地址" required name="equipment_ip" class="col-xs-10 col-sm-5" />
                            </div>
                        </div>
                        
                        <div class="space-4"></div>
                      
                        
                        
                        <div class="form-group">
                            <label class="col-sm-3 control-label no-padding-right">引擎类型：</label>

                            <div class="col-sm-9">
                               <select name="equipment_type" class="equipment_type">      
                                    <option value=""></option>                   
                                <?php foreach($equipment_type as $key => $val): ?>
                                    <option value="<?= $val ?>"><?= $val ?></option>
                                <?php endforeach; ?>
                                  
                                </select>
                            </div>
                        </div>

                        <div class="clearfix form-actions">
                            <div>
                                <button class="btn btn-info" type="submit">
                                    <i class="icon-ok bigger-110"></i>
                                    提交
                                </button>

                               <!--  &nbsp; &nbsp; &nbsp;
                                <button class="btn" type="reset">
                                    <i class="icon-undo bigger-110"></i>
                                    取消
                                </button> -->
                            </div>
                        </div>
                    </form>
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
    </div>
    <div id="delNet"  class="popLayer" style="top:100px;left:50%;width: 40%;margin-left:-20%;">
        <div class="breadcrumbs">
            <ul class="breadcrumb">
                <li>
                    删除设备
                </li>
            </ul>
            <!-- .breadcrumb -->
            <span class="floatRig closePop">关闭</span>
        </div>
        <div class="col-sm-12">
            <div class="row">
                <div class="col-xs-win">
                    <!-- PAGE CONTENT BEGINS -->
                    <form style="position:relative;top:20px;" id="net_delete" class="form-horizontal" role="form">

                        <div class="form-group">
                            <label class="col-sm-4 control-label no-padding-right"> 确定要删除选中的设备？ </label>
                        </div>

                        <!-- <input type="hidden" name="id" value="<?php echo ($template_data['id']); ?>" /> -->
                        <div class="clearfix form-actions">
                            <div>
                                <button  class="net_delete btn btn-danger" type="submit">
                                    <i class="icon-remove  bigger-110 "></i>
                                    删除
                                </button>
<!--
                                &nbsp; &nbsp; &nbsp;
                                <button class="btn" type="reset">
                                    <i class="icon-undo bigger-110"></i>
                                    取消
                                </button>-->
                            </div>
                        </div>
                    </form>
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
    </div>
    <div id="ajaxAlert"  class="popLayerTip">
        <div class="breadcrumbs">
            <ul class="breadcrumb">
                <li>
                    提示
                </li>
            </ul>
            <!-- .breadcrumb -->
            <span class="floatRig closePop"></span>
        </div>
            <div class="tipText"></div>
    </div>
    
    <div id="agreeNet"  class="popLayer" style="top:100px;left:50%;width: 40%;margin-left:-20%;">
        <div class="breadcrumbs">
            <ul class="breadcrumb">
                <li>
                    审核
                </li>
            </ul>
            <!-- .breadcrumb -->
            <span class="floatRig closePop">关闭</span>
        </div>
        <div class="col-sm-12">
            <div class="row">
                <div class="col-xs-win">
                    <!-- PAGE CONTENT BEGINS -->
                    <form style="position:relative;top:20px;" id="net_agree" class="form-horizontal" role="form">

                        <div class="form-group">
                            <label class="col-sm-4 control-label no-padding-right"> 确认该网元审核通过？
                            </label>
                        </div>

                        <input type="hidden" name="id" id="id" value="" />
                        <div class="clearfix form-actions">
                            <div>
                                <button  class="net_agree btn btn-danger" type="submit">
                                    <i class="icon-remove  bigger-110 "></i>
                                    确认
                                </button>

             <!--                   &nbsp; &nbsp; &nbsp;
                                <button class="btn" type="reset" onclick='$("#agreeNet").hide();$("#fade").hide();return false;'>
                                    <i class="icon-undo bigger-110"></i>
                                    取消
                                </button>-->
                            </div>
                        </div>
                    </form>
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
    </div>

    <div id="agreeNet_one"  class="popLayer" style="top:100px;left:50%;width: 40%;margin-left:-20%;">
        <div class="breadcrumbs">
            <ul class="breadcrumb">
                <li>
                    审核
                </li>
            </ul>
            <!-- .breadcrumb -->
            <span class="floatRig closePop">关闭</span>
        </div>
        <div class="col-sm-12">
            <div class="row">
                <div class="col-xs-win">
                    <!-- PAGE CONTENT BEGINS -->
                    <form style="position:relative;top:20px;" id="net_agree_one" class="form-horizontal" role="form">

                        <div class="form-group">
                            <label class="col-sm-4 control-label no-padding-right"> 确认该网元审核通过？
                            </label>
                        </div>

                        <input type="hidden" name="id" id="id" value="" />
                        <div class="clearfix form-actions">
                            <div>
                                <button  class="net_agree btn btn-danger" type="submit">
                                    <i class="icon-remove  bigger-110 "></i>
                                    确认
                                </button>

<!--                                &nbsp; &nbsp; &nbsp;
                                <button class="btn" type="reset" onclick='$("#agreeNet_one").hide();$("#fade").hide();return false;'>
                                    <i class="icon-undo bigger-110"></i>
                                    取消
                                </button>-->
                            </div>
                        </div>
                    </form>
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
    </div>

    <div id="fade" class="black_overlay"></div>

    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try {
                ace.settings.check('breadcrumbs', 'fixed')
            } catch (e) {
            }
        </script>

        <ul class="breadcrumb">
            <li>
                设备管理
            </li>
            <li class="active">设备列表</li>
        </ul>
        <!-- .breadcrumb -->


    </div>
    <div class="col-sm-12">
        <div class="row">
            <div class="col-xs-12">
                <div class="formArea">
                    <!--<a href="#" class="more">更多条件</a>-->
                     <form method="get" id="" action="/APT/index.php/Home/Negroup/index">
                        <p><label class="w70">引擎类型：</label>                       
                           <select name="equipment_type" class="equipment_type">
                                <option value="">&nbsp;全部</option>                         
                                <?php foreach($equipment_type as $key => $val): ?>
                                    <option value="<?= $val ?>"><?= $val ?></option>
                                <?php endforeach; ?>                                
                            </select>                                    
                            <label>设备名称：</label>
                            <input type="text" name="equipment_name" class="w100 serial_number "/>                   
                            <label>IP：</label>
                            <input type="text" name="equipment_ip" class="w100 serial_number" pattern="^[1-9]{1}\d{0,2}.\d{1,3}.\d{1,3}.\d{1,3}$" title="请输入正确格式的IP地址" >
                                                 
                            <button class="btn btn-sm btn-primary marL10"><i class="fa fa-search"></i>查询</button>
                        </p>
                    <!--
                    <div class="moreSelect" style="display:none"> 

                        <p><label class="w70">主机名称：</label><input type="text" name="host"></p>
                    </div>
                    -->
                        
                    </form>
                </div>
                <div class="buttonGroup">
                    <a href="#" class="btn btn-link" id="netAdd"><i class="icon-plus-sign bigger-120 green"></i>添加</a>|
                    <a href="javascript:;" class="btn btn-link" id="netDel"><i class="icon-remove  bigger-120 red "></i>批量删除</a>
                    <!--<a href="#" class="btn btn-link" id="netImport"><i class="icon-download-alt  bigger-100 blue "></i>批量导入</a>
                    <a href="javascript:;" class="btn btn-link netAgree" id="netCheck"><i class=" icon-check  bigger-100 purple "></i>批量审核</a>
                    -->
                </div>

                <div class="table-responsive">
                    <table id="sample-table-1" class="table table-striped table-bordered table-hover" style="text-align:center;">
                        <thead>
                            <tr>
                                <th style="text-align:center;"><input type="checkbox"></th>
                                <th style="text-align:center;">设备名称</th>
                                <th style="text-align:center;">IP</th>
                                <th style="text-align:center;">引擎类型</th>
                                <th style="text-align:center;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php if(is_array($equipment)): $i = 0; $__LIST__ = $equipment;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$vo): $mod = ($i % 2 );++$i;?><tr>
                                <td><input type="checkbox" name="checkbox" value="<?php echo ($vo['id']); ?>"></td>
                                <td><?php echo ($vo["equipment_name"]); ?></td>
                                <td class="netName"><?php echo ($vo["equipment_ip"]); ?></td>
                                <td class="netType"><?php echo ($vo["equipment_type"]); ?></td>

                                <td>
                                        <?php if(authcheck('Home/Negroup/ne_info','1','')): ?><a class="blue" href="/APT/index.php/Home/Negroup/ne_info?id=<?php echo ($vo['id']); ?>" title="设备状态">
                                                <i class="icon-facetime-video  bigger-130"></i>
                                            </a><?php endif; ?>

                                        <a class="green editeNet" href="#" value="<?php echo ($vo['id']); ?>" title="编辑">
                                            <i class="icon-pencil bigger-130"></i>
                                        </a>
                                        <input type="hidden"  value="<?php echo ($vo['id']); ?>">

                                        <a class="red deletenet" href="#" value="<?php echo ($vo['id']); ?>" title="删除">
                                            <i class="icon-trash bigger-130"></i>
                                        </a>


                                </td>
                            </tr><?php endforeach; endif; else: echo "" ;endif; ?>
                        </tbody>
                    </table>
                </div>
                <!-- /.table-responsive -->
            </div>
            <!-- /span -->
        </div>
        <!-- /row -->
        <div class="dataTables_paginate paging_bootstrap">
            <ul class="pagination">
                <?php echo ($show); ?>
            </ul>
        </div>
    </div>
</div><!-- /.main-content -->
<script type="text/javascript" src="/APT/Public/js/jquery.form.js"></script>
<script type="text/javascript">
    $('.type').attr('value',getParam("type"));
    $('.negroup_id').attr('value',getParam("negroup_id"));
    $('.serial_number').attr('value',getParam("serial_number"));
    $('.name').attr('value',getParam("name"));
    $('.status').attr('value',getParam("status"));
    $('.ip').attr('value',getParam("ip"));

    function URLdecode(sStr){
       return sStr.replace(/\+/g,' ').replace(/\%2F/g,'\/'); 
    }

    function getParam(paramName)
    {
        paramValue = "";
        isFound = false;
        if (this.location.search.indexOf("?") == 0 && this.location.search.indexOf("=")>1)
        {
            arrSource = this.location.search.substring(1,this.location.search.length).split("&");
            i = 0;
            while (i < arrSource.length && !isFound)
            {
                if (arrSource[i].indexOf("=") > 0)
                {
                    if (arrSource[i].split("=")[0].toLowerCase()==paramName.toLowerCase())
                    {
                        paramValue = arrSource[i].split("=")[1];
                        isFound = true;
                    }
                }
                i++;
            }
        }
        return paramValue;
    }

    $(".more").click(function () {
        var div = $(".moreSelect");
        if (div.css("display") === "none") {
            div.show();
            $('.more').html('收起')
        } else {
            div.hide();
            $('.more').html('更多条件')
        }
        return false;
    })

    $(document).ready(function(){
        $("#form_upload").ajaxForm({
            success:function(data){
                if (data.status === 'success') {
                    layer.alert("导入成功");
                    window.location.reload();
                } else if (data.status === 'failed') {
                    layer.alert(data.message);
                }else{
                    layer.alert(data.info);
                }
            }
        });
    })

    

    // $("#form_upload").submit(function(data){
    //     console.log(data);return false;
    //     $.ajax({
    //         url:'/APT/index.php/Home/Negroup/upload',
    //         data:data,
    //         dataType:'json',
    //         type:'POST',
    //         success:function(data){
    //             if (data.status=='success') {
    //                 $("#ajaxAlert .tipText").html("导入成功");   
    //                 $("#ajaxAlert").show();
    //                 window.location.reload();
    //             };
    //         }
    //     });
    //     return false;
    // })



</script>
<script type="text/javascript">
    $(".buttonGroup #netAdd").click(function () {
        $("#addNet").show();
        $("#fade").show();
        return false
    });
    $(".closePop").css("cursor", "pointer").click(function () {
        $("#addNet").hide();
        $("#importNet").hide();
        $("#delNet").hide();
        $("#editeNet").hide();
        $("#NetDetail").hide();
        $("#agreeNet").hide();
        $("#agreeNet_one").hide();
        $("#fade").hide();
        $(":checked").attr('checked',false);
    });
    $(".buttonGroup #netDel").click(function () {
        var val= $("input:checkbox[name='checkbox']:checked").map(function() {
            return $(this).val();
        }).get();
        if(val.length<1){
            layer.alert("请选择数据");
            return;
        }
        $("#delNet").show();
        $("#fade").show();
        return false
    });
    $(".buttonGroup #netCheck").click(function () {
        var val= $("input:checkbox[name='checkbox']:checked").map(function() {
            return $(this).val();
        }).get();
        if(val.length<1){
            layer.alert("请选择数据");
            return;
        }
        $("#agreeNet").show();
        $("#fade").show();
        return false
    });

    // $(".netAgree").click(function () {
    //     $("#agreeNet").show();
    //     $("#fade").show();
    //     return false
    // });

    $(".editeNet").click(function () {
        $("#editeNet").show();
        $("#fade").show();
        var row = $(this).parents('tr');
        $("#netedite_form #id").val($(this).next().val());
       // $("#netedite_form input[name='id']").val(row.children('td:eq(0)').html());
        $("#netedite_form input[name='equipment_name']").val(row.children('td:eq(1)').html());
        $("#netedite_form input[name='equipment_ip']").val(row.children('td:eq(2)').html());
       // $("#netedite_form input[name='equipment_type']").val(row.children('td:eq(3)').html());
       
        var netType=$("select[name='equipment_type'] option");
        for(var i=0;i<netType.length;i++){
           if(netType[i].innerHTML==row.children('td:eq(3)').html()){
               netType[i].setAttribute('selected','selected')
           }
        }

       /* var innterHtml=row.children('td:eq(5)').html();
        var sel_len=$("#netedite_form select[name='netgroup'] option");
        for(var i=0;i<sel_len.length;i++){
            if (sel_len[i].innerHTML==innterHtml){
                sel_len[i].selected=true;
                break;
            }
        }*/
        return false
    })

    $(".NetDetail").click(function () {
        $("#NetDetail").show();
        $("#fade").show();
        return false
    })

    $(".buttonGroup #netImport").click(function () {
        $("#importNet").show();
        $("#fade").show();
        return false
    });
    $(".deletenet").click(function () {
        $(":checked").attr('checked',false);
        $(this).parent().parent().children().first().children().first().attr('checked','checked');
        $("#delNet").show();
        $("#fade").show();
        return false;
    });

    $('.verify').click(function(){
      var id = $(this).parents('tr').children('td:eq(0)').children().val();
      $("#agreeNet_one #id").val(id);
      $("#agreeNet_one").show();
      $("#fade").show();
     
      return false;

    });


</script>



<script type="text/javascript">
    $(function () {

        var gaugeOptions = {

            chart: {
                type: 'solidgauge'
            },

            title: null,

            pane: {
                center: ['50%', '85%'],
                size: '140%',
                startAngle: -90,
                endAngle: 90,
                background: {
                    backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
                    innerRadius: '60%',
                    outerRadius: '100%',
                    shape: 'arc'
                }
            },

            tooltip: {
                enabled: false
            },

            // the value axis
            yAxis: {
                stops: [
                    [0.1, '#55BF3B'], // green
                    [0.5, '#DDDF0D'], // yellow
                    [0.9, '#DF5353'] // red
                ],
                lineWidth: 0,
                minorTickInterval: null,
                tickPixelInterval: 400,
                tickWidth: 0,
                title: {
                    y: -70
                },
                labels: {
                    y: 16
                }
            },

            plotOptions: {
                solidgauge: {
                    dataLabels: {
                        y: 5,
                        borderWidth: 0,
                        useHTML: true
                    }
                }
            }
        };

        // The speed gauge
        $('#container-speed').highcharts(Highcharts.merge(gaugeOptions, {
            yAxis: {
                min: 0,
                max: 100,
                title: {}
            },

            credits: {
                enabled: false
            },

            series: [{
                name: 'Speed',
                data: [80],
                dataLabels: {
                    format: '<div style="text-align:center"><span style="font-size:20px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}<b style="font-size: 12px; color: #999; font-weight: normal">%</b></span><br/>'
                },
                tooltip: {
                    valueSuffix: ' km/h'
                }
            }]

        }));

        // The RPM gauge
        $('#container-rpm').highcharts(Highcharts.merge(gaugeOptions, {
            yAxis: {
                min: 0,
                max: 100,
                title: {}
            },

            series: [{
                data: [1],
                dataLabels: {
                    format: '<div style="text-align:center"><span style="font-size:20px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}<b style="font-size: 12px; color: #999; font-weight: normal">%</b></span><br/>'
                },
                tooltip: {
                    valueSuffix: ' revolutions/min'
                }
            }]

        }));


        $('#container-zol').highcharts(Highcharts.merge(gaugeOptions, {
            yAxis: {
                min: 0,
                max: 100,
                title: {}
            },

            series: [{
                data: [1],
                dataLabels: {
                    format: '<div style="text-align:center"><span style="font-size:20px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}<b style="font-size: 12px; color: #999; font-weight: normal">%</b></span><br/>'
                },
                tooltip: {
                    valueSuffix: ' revolutions/min'
                }
            }]

        }));

        // Bring life to the dials
        setInterval(function () {
            // Speed
            var chart = $('#container-speed').highcharts(),
                    point,
                    newVal,
                    inc;

            if (chart) {
                point = chart.series[0].points[0];
                inc = Math.round((Math.random() - 0.5) * 100);
                newVal = point.y + inc;

                if (newVal < 0 || newVal > 100) {
                    newVal = point.y - inc;
                }

                point.update(newVal);
            }
            // Speed
            chart = $('#container-rpm').highcharts(),
                    point,
                    newVal,
                    inc;

            if (chart) {
                point = chart.series[0].points[0];
                inc = Math.round((Math.random() - 0.5) * 100);
                newVal = point.y + inc;

                if (newVal < 0 || newVal > 100) {
                    newVal = point.y - inc;
                }

                point.update(newVal);
            }


            // RPM
            chart = $('#container-zol').highcharts(),
                    point,
                    newVal,
                    inc;

            if (chart) {
                point = chart.series[0].points[0];
                inc = Math.round((Math.random() - 0.5) * 100);
                newVal = point.y + inc;

                if (newVal < 0 || newVal > 100) {
                    newVal = point.y - inc;
                }

                point.update(newVal);
            }
        }, 2000);


    });


</script>
<script type="text/javascript">
    var currentAmount = 32;
</script>

<script>
    jQuery(function ($) {

        $(' #id-input-file-2').ace_file_input({
            no_file: '未选择文件 ...',
            btn_choose: '浏览',
            btn_change: 'Change',
            droppable: false,
            onchange: null,
            thumbnail: false
        });

    });

</script>
<script>
//审核数据
        $("#net_agree").submit(function(e){
            e.stopPropagation();
            e.preventDefault();
    
            var data = $("input:checkbox[name='checkbox']:checked").map(function(){
                return $(this).val();
            }).get().join(',');
            
            $.ajax({
                url:'/APT/index.php/Home/Negroup/append',
                data:{where : '`id` in (' + data + ')'},
                type:'POST',
                success:function(data){
                    if (data.status === 'success') {
                        $("#agreeNet").hide();
                        $("#fade").hide();
                        layer.alert("审核成功");
                        window.location.reload();
                        $(":checked").attr('checked',false);
                    };
                }
            });
        })

        $("#net_agree_one ").submit(function(e){
            e.stopPropagation();
            e.preventDefault();
            var id = $("#net_agree_one #id").val();
            $.ajax({
                url:'/APT/index.php/Home/Negroup/append',
                data:{where : 'id=' + id},
                type:'POST',
                success:function(data){
                    if (data.status === 'success') {
                        $("#agreeNet_one").hide();
                        $("#fade").hide();
                        layer.alert("审核成功");
                        window.location.reload();
                    };
                }
            });

        })
//删除数据
        $("#net_delete").click(function(e) {
            e.stopPropagation();
            e.preventDefault();
            var id = $("input:checkbox[name='checkbox']:checked").map(function() {
                return $(this).val();
            }).get().join(',');
            $.ajax({
                type: "POST",
                url: "/APT/index.php/Home/Negroup/delnet",
                data: {'id':id},
                dataType: "json",
                success: function(data){
                    if(data.status=='success'){
                        $("#delNet").hide();
                        $("#fade").hide();
                        layer.alert("删除成功");
                        window.location.reload();
                        $(":checked").attr('checked',false);
                    }else {
                        layer.alert(data.info);
                    }
               }     
            });
        });

$('#addNet_form').submit(function(e){
    e.stopPropagation();
    e.preventDefault();
    var addNet_data = $('#addNet_form').serialize();
    //console.log(addNet_data);
    $.ajax({
        url:'/APT/index.php/Home/Negroup/netAdd',
        type:'POST',
        dataType:'json',
        data:addNet_data,
        success:function(data){
            if(data.status=='success'){

                 $("#addNet").hide();
                $("#fade").hide();
                layer.alert("添加成功");
               window.location.reload();
            } else if (data.status=='net') {
                layer.alert(data.info);
            }else if (data.status=='netname') {
                layer.alert(data.info);
            };
        }
    });
});

$('#netedite_form').submit(function(e){
    e.stopPropagation();
    e.preventDefault();
    var id = $("input:checkbox[name='checkbox']:checked").map(function() {
                return $(this).val();
                }).get().join(',');
    var editeNet_data = $('#netedite_form').serialize();
    $.ajax({
        url:'/APT/index.php/Home/Negroup/netedite',
        type:'POST',
        dataType:'json',
        data:editeNet_data,
        success:function(data){
            if(data.status=='success'){
                layer.alert("编辑成功");
                window.location.reload();
            }
        }
    });
});
</script>

<script type="text/javascript">
    var currentAmount = 32;
</script>



<div class="ace-settings-container" id="ace-settings-container" style="display:none">
  <div class="btn btn-app btn-xs btn-warning ace-settings-btn" id="ace-settings-btn">
    <i class="icon-cog bigger-150"></i>
  </div>

  <div class="ace-settings-box" id="ace-settings-box">
    <div>
      <div class="pull-left">
        <select id="skin-colorpicker" class="hide">
          <option data-skin="default" value="#438EB9">#438EB9</option>
          <option data-skin="skin-1" value="#222A2D">#222A2D</option>
          <option data-skin="skin-2" value="#C6487E">#C6487E</option>
          <option data-skin="skin-3" value="#D0D0D0">#D0D0D0</option>
        </select>
      </div>
      <span>&nbsp; 换肤</span>
    </div>

    <div>
      <input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-navbar"/>
      <label class="lbl" for="ace-settings-navbar"> 固定导航</label>
    </div>

    <div>
      <input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-sidebar"/>
      <label class="lbl" for="ace-settings-sidebar"> 固定边栏</label>
    </div>

    <div>
      <input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-breadcrumbs"/>
      <label class="lbl" for="ace-settings-breadcrumbs"> 固定位置信息</label>
    </div>

    <div>
      <input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-rtl"/>
      <label class="lbl" for="ace-settings-rtl"> 左右切换</label>
    </div>

    <div>
      <input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-add-container"/>
      <label class="lbl" for="ace-settings-add-container">
        缩进
        <!-- <b>.container</b> -->
      </label>
    </div>
  </div>
</div><!-- /#ace-settings-container -->
</div><!-- /.main-container-inner -->
<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse" style="display:none;">
  <i class="icon-double-angle-up icon-only bigger-110"></i>
</a>
</div><!-- /.main-container -->

<div id="fade" class="black_overlay"></div>

<div id="ajaxAlert" class="popLayerTip">
  <div class="breadcrumbs">
    <ul class="breadcrumb">
      <li>
        提示
      </li>
    </ul>
    <!-- .breadcrumb -->
    <span class="floatRig closePop"></span>
  </div>
  <div class="tipText">

  </div>
</div>


<!-- basic scripts -->

<!--[if !IE]> -->

<script type="text/javascript">
  window.jQuery || document.write("<script src='/APT/Public/css/assets/js/jquery-2.0.3.min.js'>" + "<" + "/script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
  window.jQuery || document.write("<script src='/APT/Public/css/assets/js/jquery-1.10.2.min.js'>" + "<" + "/script>");
</script>
<![endif]-->

<script type="text/javascript">
  if ("ontouchend" in document) document.write("<script src='/APT/Public/css/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
</script>

<script src="/APT/Public/css/assets/js/bootstrap.min.js"></script>
<script src="/APT/Public/css/assets/js/typeahead-bs2.min.js"></script>
<script src="/APT/Public/css/assets/js/jquery.nestable.min.js"></script>
<!-- page specific plugin scripts -->

<!--[if lte IE 8]>
<script src="/APT/Public/css/assets/js/excanvas.min.js"></script>
<![endif]-->

<script src="/APT/Public/css/assets/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="/APT/Public/css/assets/js/jquery.ui.touch-punch.min.js"></script>
<script src="/APT/Public/css/assets/js/chosen.jquery.min.js"></script>
<script src="/APT/Public/css/assets/js/fuelux/fuelux.spinner.min.js"></script>
<!--<script src="/APT/Public/css/assets/js/date-time/bootstrap-datepicker.min.js"></script>-->
<script src="/APT/Public/css/assets/js/date-time/bootstrap-datepicker.min.js"></script>
<script src="/APT/Public/css/assets/js/date-time/bootstrap-timepicker.min.js"></script>
<script src="/APT/Public/css/assets/js/date-time/moment.min.js"></script>
<script src="/APT/Public/css/assets/js/date-time/daterangepicker.min.js"></script>
<script src="/APT/Public/css/assets/js/datetimepicker/datetimepicker.min.js"></script>
<script src="/APT/Public/css/assets/js/bootstrap-colorpicker.min.js"></script>
<script src="/APT/Public/css/assets/js/jquery.knob.min.js"></script>
<script src="/APT/Public/css/assets/js/jquery.autosize.min.js"></script>
<script src="/APT/Public/css/assets/js/jquery.inputlimiter.1.3.1.min.js"></script>
<script src="/APT/Public/css/assets/js/jquery.maskedinput.min.js"></script>
<script src="/APT/Public/css/assets/js/bootstrap-tag.min.js"></script>

<!-- ace scripts -->

<script src="/APT/Public/css/assets/js/ace-elements.min.js"></script>
<script src="/APT/Public/css/assets/js/ace.min.js"></script>
<script src="/APT/Public/css/assets/js/jquery.ipaddress.js"></script>
<script src="/APT/Public/js/data.js"></script>
<script src="/APT/Public/js/moment.min.js"></script>
<script src="/APT/Public/js/daterangepicker.js"></script>
<!--<script src="/APT/Public/js/jquery.bootstrap-duallistbox.js"></script>-->


<script type="text/javascript" src="/APT/Public/css/assets/js/ztreejs/jquery.ztree.core-3.5.js"></script>
<script type="text/javascript" src="/APT/Public/css/assets/js/ztreejs/jquery.ztree.excheck-3.5.js"></script>

<script type="text/javascript" src="/APT/Public/js/jquery.form.js"></script>
<script type="text/javascript" src="/APT/Public/js/main.js"></script>
<script type="text/javascript" src="/APT/Public/js/city.js"></script>
<script type="text/javascript" src="/APT/Public/js/layer/layer.js"></script>
<script type="text/javascript" src="/APT/Public/js/laytpl/laytpl.js"></script>
<script src="/APT/Public/js/person.js"></script>
<script src="/APT/Public/js/tinyselect.js"></script>

<!-- inline scripts related to this page -->

<script type="text/javascript">


  $(".closePop").css("cursor", "pointer").click(function () {
    $("#fade").hide();
    $("#table :checked").attr('checked', false);
  });
  (function (Highcharts) {
    var each = Highcharts.each;

    Highcharts.wrap(Highcharts.Legend.prototype, 'renderItem', function (proceed, item) {

      proceed.call(this, item);


      var series  = this.chart.series,
          element = item.legendGroup.element;

      element.onmouseover = function () {
        each(series, function (seriesItem) {
          if (seriesItem !== item) {
            each(['group', 'markerGroup'], function (group) {
              seriesItem[group].attr('opacity', 0.05);
            });
          }
        });
      }
      element.onmouseout  = function () {
        each(series, function (seriesItem) {
          if (seriesItem !== item) {
            each(['group', 'markerGroup'], function (group) {
              seriesItem[group].attr('opacity', 1);
            });
          }
        });
      }

    });
  }(Highcharts));

///////////////////////------//////////////////////
  jQuery(function ($) {
    $('.dd').nestable('width:100%');
    $('.dd-handle a').on('mousedown', function (e) {
      e.stopPropagation();
    });
    $(".chosen-select").chosen({width: "inherit"});
    $('#ip').ipaddress();
    $('table th input:checkbox').on('click', function () {
      var that = this;
      $(this).closest('table').find('tr > td:first-child input:checkbox')
        .each(function () {
          this.checked = that.checked;
          $(this).closest('tr').toggleClass('selected');
        });

    });


    // $('#web_button').click(function(){
    //    var webdata = $('#web_form').serialize();
    //    send('/APT/index.php/Home/Negroup/add_web',webdata);
    // });

    //$('#base_info_button').on('click',function(){

    $('.date-picker').datepicker({autoclose: true, language: 'zh-CN'}).next().on(ace.click_event, function () {
      $(this).prev().focus();
    });


    $(document).on('change', '.condition', function () {
      var $this = $(this);
      var th = $(this).val();
      $this.next("select.san").remove();
      if (th == 'user') {
        if ($(this).next().attr('name') == 'sub_type[]') {
          $(this).next().remove();
        }
        $(this).after('<select name="sub_type[]">' +
          '<option value="static">静态用户</option>' +
          '<option value="dial">账号用户</option>' +
          '<option value="link">链路ID</option>' +
          '</select>');
        $(this).next("[name='sub_type[]']").bind("change", function () {
          var $this = $(this);
          $this.next("input").remove();
          $this.next("select").remove();
          if ($this.val() == "link"){
            syncPost("<?= U("Home/Vlan/link_list")?>",{},function (data) {
              var select = $("<select class='san' name='value[]'>")
              $.each(data, function (k, v) {
                select.append($("<option>").attr("value", v.id).text(v.link_name))
              });
              $this.after(select);
            });
          }else {
            $this.after('<input type="text" name="value[]" required="">');
          }
        });
      } else if (th == 'keyword') {
        if ($(this).next().attr('name') == 'sub_type[]') {
          $(this).next().remove();
        }

        $(this).after('<select name="sub_type[]"><option value="http_content">正文内容</option>' +
          '<option value="attach_title">附件标题</option><option value="attach_content">附件内容</option></select>');
      } else if (th == 'src_area') {
        if ($(this).next().attr('name') == 'sub_type[]') {
          $(this).next().remove();
        }

        $(this).after('<select name="sub_type[]"><option value="area_name">区域名称</option>' +
          '<option value="as_num">AS号</option></select>');
      } else if (th == 'src_area') {
        if ($(this).next().attr('name') == 'sub_type[]') {
          $(this).next().remove();
        }


        $(this).after('<select name="sub_type[]"><option value="area_name">区域名称</option>' +
          '<option value="as_num">AS号</option></select>');
      } else {
        if ($(this).next().attr('name') == 'sub_type[]') {
          $(this).next().remove();
        }
      }

    });


    $('.icon-plus').click(function () {
      $('.icon-plus').parent().parent().after("<div class='form-group'>" +
        "<label class='col-sm-3 control-label no-padding-right'></label>" +
        "<div class='col-sm-9'><span class='input-icon input-icon-right'>" +
        "<select  class='condition' name='condition[]' required='required'></select> " +
        "<input type='text' name='value[]' required='required' />" +
        "<i class='icon-filter blue'></i></span> " +
        "<i style='cursor:pointer' class='icon-minus red'></i></div></div>");
      var content = $('.icon-plus').parent().children().children().eq(0).html();
      $('.icon-plus').parent().parent().next().find('select').append(content);
    });

    $(document).on('click', '.icon-minus', function () {
      $(this).parent().parent().remove();
    });


  });



  $('.pre').click(function () {
    var id = $('.pre').next().val();
    //alert('xmlx');
    window.location.href = '<?php echo U('
    User / authorize
    ');?>' + '?id=' + id;
  });

  $("#logout").click(function () {
    window.location.href = "/APT/index.php/Login/logout";
  });

  $(document).ready(function () {
    Wind.css('treeTable');
    Wind.use('treeTable', function () {
      $("#menus-table").treeTable({
        indent: 20
      });
    });

    $('#datepicker1').timepicker({
      minuteStep  : 1,
      showSeconds : false,
      showMeridian: false
    }).next().on(ace.click_event, function () {
      $(this).prev().focus();
    });

    $('#datepicker2').timepicker({
      minuteStep  : 1,
      showSeconds : false,
      showMeridian: false
    }).next().on(ace.click_event, function () {
      $(this).prev().focus();
    });
  });

  function checknode(obj) {
    var chk       = $("input[type='checkbox']");
    var count     = chk.length;
    var num       = chk.index(obj);
    var level_top = level_bottom = chk.eq(num).attr('level');
    for (var i = num; i >= 0; i--) {
      var le = chk.eq(i).attr('level');
      if (eval(le) < eval(level_top)) {
        chk.eq(i).attr("checked", true);
        var level_top = level_top - 1;
      }
    }
    for (var j = num + 1; j < count; j++) {
      var le = chk.eq(j).attr('level');
      if (chk.eq(num).attr("checked") == "checked") {
        if (eval(le) > eval(level_bottom)) {
          chk.eq(j).attr("checked", true);
        }
        else if (eval(le) == eval(level_bottom)) {
          break;
        }
      } else {
        if (eval(le) > eval(level_bottom)) {
          chk.eq(j).attr("checked", false);
        } else if (eval(le) == eval(level_bottom)) {
          break;
        }
      }
    }
  }

  function delSelect() {
    var checkboxs = document.getElementsByName("checkbox");
    var tr        = table.getElementsByTagName("tr");
    for (var i = 0; i < checkboxs.length; i++) {
      if (tr.length == 2) {
        checkboxs[i].checked = false;
        return;
      }
      if (checkboxs[i].checked == true) {
        removeTr(checkboxs[i]);
        i = -1;
      }
    }
  }


</script>

<!--[if lte IE 8]>
<div id="ie678-warning" style="z-index: 10000;">您的浏览器版本过低，无法体验所有功能，建议升级或者更换浏览器。 <a href="http://browsehappy.com/">了解更多...</a>
</div>
<script type="text/javascript">
  var b_name = navigator.appName;
  var b_version = navigator.appVersion;
  var version = b_version.split(";");
  var trim_version = version[1].replace(/[ ]/g, "");
  var el = document.getElementById("ie678-warning");
  if (b_name == "Microsoft Internet Explorer") {
    /*如果是IE6或者IE7*/
    if (trim_version == "MSIE7.0" || trim_version == "MSIE6.0" || trim_version == "MSIE8.0") {

      window.onscroll = function () {
        el.style.top  = (document.documentElement.scrollTop) + "px";
        el.style.left = (document.documentElement.scrollLeft) + "px";
      }
    }
  }


</script>
<![endif]-->

</body>
</html>