<div class="main-content">
    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try {
                ace.settings.check('breadcrumbs', 'fixed')
            } catch (e) {
            }
        </script>

        <ul class="breadcrumb">
            <li>
                系统管理
            </li>
            <li class="active">系统管理</li>
        </ul>
        <!-- .breadcrumb -->
        <!-- #nav-search -->
    </div>
    
    <div class="tabbable marL10">
        <ul class="nav nav-tabs" id="myTab">
             <li class="active">
                <a data-toggle="tab" href="#profile">
                    超时锁定时长
                </a>
            </li>
            <li>
                <a data-toggle="tab" href="#home">
                    密码修改
                </a>
            </li>

        </ul>

        <div class="tab-content">
            <div id="home" class="tab-pane" >
                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-xs-12">
                            <h2 class="settingFormTit">密码修改</h2>
                             
                            <div class="settingForm">
                                <form id="password_edit_form" style="position:relative;top:20px;" class="form-horizontal" role="form">
                
                                <div class="form-group">
                                    <label class="col-sm-4 control-label no-padding-right"> 当前密码</label>

                                    <div class="col-sm-7">
                                        <input type="password" name="password"  class="col-xs-10 col-sm-5" pattern="^\S{6,18}$"  title="请输入6-18位密码" required />
                                    </div>
                                </div>

                                <div class="space-4"></div>

                                <div class="form-group">
                                    <label class="col-sm-4 control-label no-padding-right"> 新密码</label>

                                    <div class="col-sm-7">
                                        <input type="password" name="password_new"  class="col-xs-10 col-sm-5" pattern="^\S{6,18}$"  title="请输入6-18位密码" required />
                                    </div>
                                </div>
                                <div class="space-4"></div>

                                <div class="form-group">
                                    <label class="col-sm-4 control-label no-padding-right"> 确认新密码</label>

                                    <div class="col-sm-7">
                                        <input type="password" name="password_new2"  class="col-xs-10 col-sm-5" pattern="^\S{6,18}$"  title="请输入6-18位密码" required />
                                    </div>
                                </div>


                                <div class="clearfix form-actions">
                                    <div class="col-md-offset-3 col-md-5">
                                        <button class="btn btn-info" type="submit">
                                            <i class="icon-ok bigger-110"></i>
                                            保存
                                        </button>
                                    </div>
                                </div>
                            </form>
                            <div style="clear:both;"></div>
                            </div>
                       </div>
                  </div>
                  <div style="clear:both;"></div>
                </div>
            </div>
            <div id="profile" class="tab-pane  in active">
                  <div class="col-sm-12">
                    <div class="row">
                        <div class="col-xs-12">
                              
                           <h2 class="settingFormTit">超时锁定时长</h2>
                             
                            <div class="settingForm">
                                <form id='sys_form'>
                                <p><label>超时锁定时长：</label><input type="number" min="1000"  name="out_time" placeholder="1440" value="{$sys_data['out_time']}"><span>秒</span></p>
                                <p><label>登录网段：</label><input type="text" name="ip_limit" placeholder="192.168.1.1/24" value="{$sys_data['ip_limit']}"><i></i></p>
                               
                                <p><label></label><button class="btn btn-sm btn-primary"><i class="fa fa-search"></i>保存</button><span></span></p>  
                                </form>
                            
                            </div>
                        </div>     
                     
                     </div>
                 </div>
            </div>
                   
            <!-- <div id="profile02" class="tab-pane">
                   
            <div class="col-sm-12">
            <div class="row">
                <div class="col-xs-12">
            
                    <div class="formArea marT10">
                          <form method="get" action="__URL__/setting">
                                             
                               
                              <div class=" floatLeft marL10">
                                 
                            <label>IP地址：</label><input type="text" name="srv_ip" class="w100 srv_ip">
                           
                              </div>
                             
                        
                        
                            <button class="btn btn-sm btn-primary marL10"><i class="fa fa-search"></i>查询</button>
            
                            </form>
                    </div>
            
            
                    <div class="buttonGroup">
                        <a href="#" class="btn btn-link" id="socketAdd"><i class="icon-plus-sign bigger-120 green"></i>添加</a>|
                        <a href="#" class="btn btn-link" id="socketDel"><i class="icon-remove  bigger-120 red "></i>删除</a>
                    </div>
            
            
            
                    <div class="table-responsive">
            
            
                        <table id="table" class="table table-striped table-bordered table-hover">
                            <thead>
                            <tr>
                                <th><input name='checkbox' type="checkbox"></th>
                                <th>IP地址</th>
                                <th>端口</th>
                                <th>认证密钥</th>
                                <th>服务端</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                                <volist name="socket_data" id="socket_data_vo">
                                <tr>
                                    <td><input type="checkbox" name="checkbox"  value="{$socket_data_vo['id']}"></td>
                                    <td>{$socket_data_vo['srv_ip']}</td>
                                    <td>{$socket_data_vo['srv_port']}</td>
                                    <td>{$socket_data_vo['key']}</td>
                                    <td><if condition = "$socket_data_vo['owner'] eq 1">UI<elseif condition = "$socket_data_vo['owner'] eq 0"/>底层</if></td>
                                    <td>
                                        
                                            <a class="green editeSoc" href="#" title="编辑">
                                                <i class="icon-pencil bigger-130"></i>
                                            </a>
            
            
                                            <a class="red deleteSoc"  href="#" title="删除">
            
                                                <i class="icon-trash bigger-130"></i>
                                            </a>
                                            <input type="hidden" value="{$socket_data_vo['id']}">
                                        
                                    </td>
                                </tr>
                                </volist>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="dataTables_paginate paging_bootstrap">
                <ul class="pagination">
                    {$show}
                </ul>
            </div>
                   
                   
            <div style="clear:both;"></div>
            </div>     
                      </div> -->
        <div style="clear:both;"></div>
        </div>
    </div>
</div>
</div></div></div>

<script>
    $('#password_edit_form').submit(function(e){
        e.stopPropagation();
        e.preventDefault();
        var password_data = $('#password_edit_form').serialize();
        $.ajax({
            url:'__URL__/password_edit',
            type:'POST',
            dataType:'json',
            data:password_data,
            success:function(data){
                if(data.status=='success'){
                    layer.alert("修改成功");
                }else if(data.status=='error1'){
                       layer.alert("当前密码错误");
                }else if (data.status=='error2') {
                       layer.alert("两次输入的密码不一致!");
                }else{
                       layer.alert("修改失败");
                }
            }
        });
    })
     $('#sys_form').submit(function(e){
        e.stopPropagation();
        e.preventDefault();
        var datas = $('#sys_form').serialize();
          $.post("__URL__/do_sys", datas, function(data){
              if (data.status == 'success') {
                 layer.msg("配置成功");
                 window.location.reload();
              } else {
                 layer.msg("配置失败");
                 window.location.reload();
              }
          });
     })
   
</script>