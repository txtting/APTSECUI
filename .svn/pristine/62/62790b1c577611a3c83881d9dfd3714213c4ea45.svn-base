<div class="main-content">
    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try {
                ace.settings.check('breadcrumbs', 'fixed')
            } catch (e) {
            }
        </script>

        <ul class="breadcrumb">
            <li>
                安全事件
            </li>
            <li class="active">暴力破解</li>
        </ul>
        <!-- .breadcrumb -->
        <!-- #nav-search -->
    </div>
    <div class="col-sm-12">
        <div class="row">
            <div class="col-xs-12">

                <div class="formArea marT10" >
                    <form method="get"  action="">
                        <label class="floatLeft">时间：</label>
                        <div class="input-group w300 floatLeft" style="width:281px; text-indent:0px;">
			                    <span class="input-group-addon">
                                    <i class="icon-calendar bigger-110"></i>
			                     </span><input class="form-control date-range-picker" type="text" name="date-range-picker" data-date-format="YYYY-MM-DD"
                                               id="id-date-range-picker-1"/>
                        </div>

                        <button class="aptSearchBtn "><i class="fa fa-search"></i>查询</button>
                    </form>
                </div>

                <div class="chartBox marT10" style="position: relative">


                    <div class="aptBox aptBoxW4 aptBoxH3" >
                        <div id="container" style=" width:98%;height:100%;"></div>
                    </div>

                    <div class="aptBox aptBoxW6 aptBoxH3 marL10" >
                        <div id="container2" style=" width:98%;height:100%;"></div>
                    </div>
                    <!--30天http流量攻击趋势图的翻页-->
                    <div class=" aptBoxW6 " style="position: absolute;right: 1px;bottom: 40px">
                        <a href="#" style="position: absolute;top: 2px;left: 60px" title="查看上一周期" >
                            <i class="icon-caret-left icon-2x"></i>
                        </a>
                        <!--<h4 style="margin:3px 40%;">3-8——3-17</h4>-->
                        <a href="#"  style="position: absolute;top: 2px;right: 7px" title="查看下一周期">
                            <i class="icon-caret-right icon-2x" ></i>
                        </a>
                    </div>
                    <div class="clearBoth"></div>
                </div>

                 <div class="formArea marT10" >
                     <label class="floatLeft">时间：</label>
                     <div class="input-group w300 floatLeft" style="width:281px; text-indent:0px;">
			                    <span class="input-group-addon">
                                    <i class="icon-calendar bigger-110"></i>
			                     </span><input class="form-control date-range-picker" type="text" name="date-range-picker" data-date-format="YYYY-MM-DD"
                                               id="id-date-range-picker-2"/>
                     </div>
                   <!-- 类型：
                    <select>
                    <option>全部</option>
                    <option>SQL注入成功</option>
                    <option>鸡肉行为</option>
                    <option>蠕虫病毒</option>
                    <option>木马回连</option>
                    <option>DDoS</option>
                    <option>非正常登录</option>
                    <option>异常网络连接</option>
                    <option>未授权下载</option>
                    <option>webshell</option>
                    </select>
                    发现时间：<input type="text" placeholder="">
                    被攻击资产：<input type="text" placeholder="" title="">
                    攻击者IP：<input type="text" placeholder="" title="">
                   <div style="display:none;"> 攻击使用协议：<input type="text" placeholder="" title="">
                    发起爆破次数：<input type="text" placeholder="" title=""></div>-->
                    <a href="#" class="aptSearchBtn">查询</a>
                     <div class="clearBoth"></div>

                </div>

                <div class="aptTable span10 marT10 tableShow" style="display: none">
                    <div class="aptListBtnGroup"><h4><b>30</b>天暴力破解分布详情</h4></div>
                <!--<div class="aptListBtnGroup"><a href="#"><i class="icon-upload-alt"></i>导出</a></div>-->
				<table data-toggle="table" data-striped="true" data-pagination="true" data-search="true"  data-show-columns="true">
                    <thead>

                            <tr>
                                <th data-field="type">类型</th>
                                <th data-field="fristTime">首次发现时间</th>
                                <th data-field="lastName">最后发现时间</th>
                                <th data-field="attackPrice">被攻击资产</th>
                                <th data-field="attackIP">攻击者IP</th>
                                <th data-field="attackAgree">攻击使用协议</th>
                                <th data-field="burstTime">发起爆破次数</th>
                                <th>标记</th>
                            <th>操作</th>
                            </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>病毒</td>
                            <td>2017-03-13 17:20:20</td>
                            <td>2017-03-13 19:20:20</td>
                            <td>服务器1</td>
                            <td>1.1.1.1</td>
                            <td>http</td>
                            <td>2000</td>
                            <td>
                            未标记
                            </td>
                            <td><a href="#" title="忽略"><i class="icon-eye-open" style="color:#F00"></i></a><a href="#" class="marL10" title="标记"><i class="icon-pushpin" style="color:#06F"></i></a></td>
                        </tr>
                        
                    </tbody>
                </table>
			</div>
                
                
            </div>
            </div>  
        </div>
        
    </div>
</div>
<script>
    var chart1=function(data){
        $('#container').highcharts({
            colors: ['#c63012', '#ea7f0c', '#cbf621', '#7798BF', '#aaeeee', '#ff0066', '#eeaaee',
                '#55BF3B', '#DF5353', '#7798BF', '#aaeeee'
            ],
            chart:{
                backgroundColor: '#fefefe',
                type: 'pie',
                options3d: {
                    enabled: true,
                    alpha: 70,
                    beta: 0
                },
            },
            title: {
                text: '30天暴力破解分布'
            },
            credits:{
                enabled:false // 禁用版权信息
            },
            tooltip: {
                pointFormat: '攻击占比: <b>{point.percentage:.1f}%</b><br>'+'{series.name}: <b>{point.y}</b>'
            },
            exporting: {
                enabled: false
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    depth: 25,
                    dataLabels: {
                        enabled: true,
                        //format: '{point.name}'
                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                        style: {
                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                        }
                    },
                }
            },
            series: [{
                type: 'pie',
                name: '攻击数',
                data: [['后门',30],['鸡肉行为',40],['蠕虫病毒',40],['木马回连',20],['DDoS',22],['非恶意',14],['其他',10]]

            }]
        });
    }


    var chart2=function(data){
        $('#container2').highcharts({
            chart: {
                type: 'column'
            },
            title: {
                text: '30天暴力破解分布趋势图'
            },
            credits:{
                enabled:false // 禁用版权信息
            },
            xAxis: {
                type: 'category',
                labels: {
                    style: {
                        fontSize: '14px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                },
            },
            yAxis: {
                min: 0,
                title: {
                    text: '数量(个)'
                }
            },
            legend: {
                enabled: false
            },
            tooltip: {
                formatter: function () {
                    return '<b>' + this.x + '</b><br/>' +
                            '告警类别: ' + this.series.name + '<br/>' +
                            '个数: ' + this.y;
                }
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    // dataLabels: {
                    //     enabled: true
                    // }
                }
            },
            series: [{
                name: 'SQL注入',
                data: [
                    ['3-8',2],['3-9',3],['3-10',4],['3-11',1],['3-12',2],['3-13',2], ['3-14',5],['3-15',3],
                    ['3-16',2],
                    ['3-17',2]
                ]
            }, {
                name: '非正常登陆',
                data: [
                    ['3-8',2],['3-9',3],['3-10',4],['3-11',1],['3-12',2],['3-13',2], ['3-14',5],['3-15',3],
                    ['3-16',2],
                    ['3-17',2]
                ]
            }, {
                name: '鸡肉行为',
                data: [
                    ['3-8',2],['3-9',3],['3-10',4],['3-11',1],['3-12',2],['3-13',2], ['3-14',5],['3-15',3],
                    ['3-16',2],
                    ['3-17',2]
                ]
            }]
        });


    }
    chart1();
    chart2();
</script>
<script>

    jQuery(function ($) {
        $('input[name=date-range-picker]').daterangepicker({
                    startDate: moment().subtract(30, 'days'),
                    endDate: moment(),
                    locale : {
                        applyLabel: '提交',
                        cancelLabel: '取消',
                        fromLabel: '开始时间',
                        toLabel: '结束时间',
                        weekLabel: 'W',
                        customRangeLabel: 'Custom Range',
                        daysOfWeek: ['日', '一', '二', '三', '四', '五','六'],
                        monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
                        firstDay: moment.localeData()._week.dow
                    },
                    dateLimit : {
                        day : 30
                    },
                    timePickerIncrement : 1440, //时间的增量，单位为分钟
                    language: 'cn',}
        ).prev().on(ace.click_event, function () {
                    $(this).next().focus();
                });

    })
</script>
