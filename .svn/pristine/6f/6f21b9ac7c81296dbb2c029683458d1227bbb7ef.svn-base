<div class="main-content">

    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try {
                ace.settings.check('breadcrumbs', 'fixed')
            } catch (e) {
            }
        </script>

        <ul class="breadcrumb">
            <li>
                安全总揽
            </li>
           
        </ul>
        <!-- .breadcrumb -->
        <!-- #nav-search -->
    </div>
    <div class="tabbable">


                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-xs-12">
                        
                        <div class="chartBox" style="position: relative">
                        <div class="aptBox aptBoxW3 aptBoxH250 eventTable flaotLeft" >
                        <h2>最新紧急事件<a href="__APP__/Urgent/index">更多...</a></h2>
                        <table cellpadding="0" cellspacing="0">
                        <tr><th>事件名称</th><th>时间</th></tr>
                        <tbody id="data1">
                            <!-- <volist name="data1" id="data_v">
                                <tr>
                                    <td>{$data_v.UgcType}</td>
                                    <td>{$data_v.Time|date="Y-m-d H:i:s",###}</td>
                                </tr>
                            </volist> -->
                        </tbody>
                        </table>
                        
                        </div>
                        
                        <div class="aptBox aptBoxW7 aptBoxH250 marL10 flaotLeft"  >
                        <div id="container" style=" width:100%;height:100%;"></div>
                        </div>
                            
                          
                        
                        <div style="width:100%;white-space:nowrap;">
                        <div class="aptBox aptBoxW3 aptBoxH250 eventTable marT10 flaotLeft" style="border:0px solid red">
                        <h2>资产探测<a href="__APP__/Vir/assets_detail">更多...</a></h2>
                        <table cellpadding="0" cellspacing="0">
                        <tr><th>IP</th><th>时间</th></tr>
                          <tbody id="data2">
                              
                          </tbody>
                        <!-- <tr><td><span class="AssetsRed" title="高危"></span>192.168.168.168</td><td>2017-03-01 10:10:10</td></tr>
                        <tr><td><span class="AssetsOrg" title="中危"></span>192.168.168.168</td><td>2017-03-01 10:10:10</td></tr>
                        <tr><td><span class="AssetsRed"></span>192.168.168.168</td><td>2017-03-01 10:10:10</td></tr>
                        <tr><td><span class="AssetsRed"></span>192.168.168.168</td><td>2017-03-01 10:10:10</td></tr> -->
                        </table>
                        
                        </div>
                        

                        <div class="aptBox aptBoxW7 aptBoxH250 marL10 marT10 flaotLeft"  style="border:0px solid red; min-width:780px;padding-top:0px;">
                               <div class="circleBoxLeft">
                               <ul>
                               <li><a href="#">紧急事件<span></span></a></li>
                               <li><a href="#">攻击事件<span></span></a></li>
                               <li><a href="#">攻击者数量</a><span></span></li>
                               </ul>
                               </div>
                               <div  class="circleBoxRig">
                               <div class="circleTit">
                               <a href="#" class="left" title="上一周期"><i class="icon-caret-left"></i></a>
                               <div><span>03-01</span><span>03-02</span><span>03-03</span><span>03-04</span><span>03-05</span><span>03-06</span><span>03-07</span><span>03-08</span><span>03-09</span><span>03-10</span></div>
                               <a href="#" class="rig" title="下一周期"><i class="icon-caret-right"></i></a>
                               <div style="clear:both;"></div>
                               </div>
                               
                               <div class="circleCon">
                               <ul>
                               <li class=""><a href="__APP__/Urgent/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/Urgent/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/Urgent/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/Urgent/index"><span class="red" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/Urgent/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/Urgent/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/Urgent/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/Urgent/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/Urgent/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/Urgent/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <div style="clear:both;"></div>
                               </ul>
                               <ul>
                               <li class=""><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/safe/index"><span class="red" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <div style="clear:both;"></div>
                               </ul>
                               <ul>
                               <li class=""><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <li class=""><a href="__APP__/safe/index"><span class="org" data-rel="tooltip"  data-placement="bottom" title="中危数量30个"></span></a></li>
                               <li class="bg0"><a href="__APP__/safe/index"><span class="red" data-rel="tooltip"  data-placement="bottom" title="高危数量30个"></span></a></li>
                               <div style="clear:both;"></div>
                               </ul>
                               
                               </div>
                               
                               </div>
                        
                        </div>
                        
                        </div>


                    

                      <div class="marT10 aptBoxH3 marT10 floatLeft webFlowChart" style="width:100%;border:0px solid green; position:relative;">
                      <span class="tabDays"><a href="#" class="sel" style="border-right:1px solid #dedede;">30天</a><a href="#">90天</a></span><span class="more"><a href="#">查看更多...</a></span>
                      <div id="containerLine" style=" width:100%;height:100%;"></div>
                      
                      </div>
                               

                        
                 <div style="clear:both;"></div>


                
            </div>
                        
                        
                        
                        </div>
                    </div>

                </div>
    </div>
</div>

<script>
// 第一次点击
    $(document).on('click','.box',function(){
        $(this).attr('class','box2')
//        $(this).html("收起")
        $(this).children().attr('class','glyphicon glyphicon-minus')
        $(this).parent().parent().after('<tr class="hid"><td colspan="6" ><div>服务器IP：127.0.0.2</div></td></tr>');
    })
    $(document).on('click','.box2',function(){
        $(this).attr('class','box');
        $(this).children().attr('class','glyphicon glyphicon-plus')
//            alert(1)
        $(this).parent().parent().next().empty();
    })


</script>
<script>
	$(function () {

$('[data-rel=tooltip]').tooltip();
$('[data-rel=popover]').popover({html:true});

    $('#container').highcharts({
        chart: {
            type: 'bar'
        },
        title: {
            text: '最近7日攻击'
        },
        xAxis: {
            categories: ['03-01', '03-02', '03-03', '03-04', '03-05', '03-06', '03-07'],
            title: {
                text: null
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: '攻击数量(个)',
                align: 'high'
            },
            labels: {
                overflow: 'justify'
            }
        },
        tooltip: {
            valueSuffix: ' 百万'
        },
        plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true
                }
            }
        },
        legend: {

            borderWidth: 0,
            backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
            shadow: false,
			enabled: false
        },
        credits: {
            enabled: false
        },
        series: [{
            name: '1800 年',
            data: [107, 31, 635, 203, 2, 203, 2]
        }]
    });
});

$(function () {
    $('#container2').highcharts({
        title: {
            text: '紧急事件、攻击事件',
            x: -20
        },
		credits:{
                    enabled:false // 禁用版权信息
                },
        xAxis: {
			type: 'datetime',
                dateTimeLabelFormats: {
                    millisecond: '%H:%M:%S.%L',
                    second: '%H:%M:%S',
                    minute: '%H:%M',
                    hour: '%H:%M',
                    day: '%m-%d',
                    week: '%m-%d',
                    month: '%Y-%m',
                    year: '%Y'
                }},
        yAxis: {
            title: {
                text: '单位'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            valueSuffix: '°C'
        },
        legend: {
            borderWidth: 0
        },
        series: [{
            name: '网络入侵',
            data: [[1486656000000,7.0],[1486569600000,7.0]]
        }]
    });
});

$(function () {
            $('#container4').highcharts({
                title: {
                    text: '攻击者数量趋势',
                    x: -20
                },
                credits:{
                    enabled:false // 禁用版权信息
                },
                xAxis: {
                    type: 'datetime',
                    dateTimeLabelFormats: {
                        millisecond: '%H:%M:%S.%L',
                        second: '%H:%M:%S',
                        minute: '%H:%M',
                        hour: '%H:%M',
                        day: '%m-%d',
                        week: '%m-%d',
                        month: '%Y-%m',
                        year: '%Y'
                    }},
                yAxis: {
                    title: {
                        text: '单位'
                    },
                    plotLines: [{
                        value: 0,
                        width: 1,
                        color: '#808080'
                    }]
                },
                tooltip: {
                    valueSuffix: '°C'
                },
                legend: {
                    borderWidth: 0
                },
                series: [{
                    name: '网络入侵',
                    data: [[1486656000000,7.0],[1486569600000,7.0]]
                }]
            });
        });


$('#containerLine').highcharts({
            chart: {
                reflow:true

            },

            title: {
                text: '网络流量趋势'
            },
            xAxis: {
                type: 'datetime',
                dateTimeLabelFormats: {
                    millisecond: '%H:%M:%S.%L',
                    second: '%H:%M:%S',
                    minute: '%H:%M',
                    hour: '%H:%M',
                    day: '%m-%d',
                    week: '%m-%d',
                    month: '%Y-%m',
                    year: '%Y'
                }
            },
            tooltip: {
                dateTimeLabelFormats: {
                    millisecond: '%H:%M:%S.%L',
                    second: '%H:%M:%S',
                    minute: '%H:%M',
                    hour: '%H:%M',
                    day: '%Y-%m-%d',
                    week: '%m-%d',
                    month: '%Y-%m',
                    year: '%Y'
                }
            },
            yAxis: {
                title: {
                    text: '流量'
                }
            },
            legend: {
                enabled: false
            },
            plotOptions: {
                area: {
                    fillColor: {
                        linearGradient: {
                            x1: 0,
                            y1: 0,
                            x2: 0,
                            y2: 1
                        },
                        stops: [
                            [0, Highcharts.getOptions().colors[0]],
                            [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                        ]
                    },
                    marker: {
                        radius: 2
                    },
                    lineWidth: 1,
                    states: {
                        hover: {
                            lineWidth: 1
                        }
                    },
                    threshold: null
                }
            },
            series: [{
                type: 'line',
                name: '入口流量',
                data: [
                    [Date.UTC(2013,5,2),0.7695],
                    [Date.UTC(2013,5,3),0.7648],
                    [Date.UTC(2013,5,4),0.7645],
                    [Date.UTC(2013,5,5),0.7638],
                    [Date.UTC(2013,5,6),0.7549],
                    [Date.UTC(2013,5,7),0.7562],
                    [Date.UTC(2013,5,9),0.7574],
                    [Date.UTC(2013,5,10),0.7543],
                    [Date.UTC(2013,5,11),0.7510],
                    [Date.UTC(2013,5,12),0.7498],
                    [Date.UTC(2013,5,13),0.7477],
                    [Date.UTC(2013,5,14),0.7492],
                    [Date.UTC(2013,5,16),0.7487],
                    [Date.UTC(2013,5,17),0.7480],
                    [Date.UTC(2013,5,18),0.7466],
                    [Date.UTC(2013,5,19),0.7521],
                    [Date.UTC(2013,5,20),0.7564],
                    [Date.UTC(2013,5,21),0.7621],
                    [Date.UTC(2013,5,23),0.7630],
                    [Date.UTC(2013,5,24),0.7623],
                    [Date.UTC(2013,5,25),0.7644],
                    [Date.UTC(2013,5,26),0.7685],
                    [Date.UTC(2013,5,27),0.7671],
                    [Date.UTC(2013,5,28),0.7687],
                    [Date.UTC(2013,5,30),0.7687],
                    [Date.UTC(2013,6,1),0.7654],
                    [Date.UTC(2013,6,2),0.7705],
                    [Date.UTC(2013,6,3),0.7687],
                    [Date.UTC(2013,6,4),0.7744],
                    [Date.UTC(2013,6,5),0.7793],
                    [Date.UTC(2013,6,7),0.7804],
                    [Date.UTC(2013,6,8),0.7770],
                    [Date.UTC(2013,6,9),0.7824],
                    [Date.UTC(2013,6,10),0.7705],
                    [Date.UTC(2013,6,11),0.7635],
                    [Date.UTC(2013,6,12),0.7652],
                    [Date.UTC(2013,6,14),0.7656],
                    [Date.UTC(2013,6,15),0.7655],
                    [Date.UTC(2013,6,16),0.7598],
                    [Date.UTC(2013,6,17),0.7619],
                    [Date.UTC(2013,6,18),0.7628],
                    [Date.UTC(2013,6,19),0.7609],
                    [Date.UTC(2013,6,21),0.7599],
                    [Date.UTC(2013,6,22),0.7584],
                    [Date.UTC(2013,6,23),0.7562],
                    [Date.UTC(2013,6,24),0.7575],
                    [Date.UTC(2013,6,25),0.7531],
                    [Date.UTC(2013,6,26),0.7530],
                    [Date.UTC(2013,6,28),0.7526],
                    [Date.UTC(2013,6,29),0.7540],
                    [Date.UTC(2013,6,30),0.7540],
                    [Date.UTC(2013,6,31),0.7518],]
            },
                     {
                         type: 'line',
                         name: '出口流量',
                         data: [
                             [Date.UTC(2013,5,2),0.5695],
                             [Date.UTC(2013,5,3),0.5648],
                             [Date.UTC(2013,5,4),0.5645],
                             [Date.UTC(2013,5,5),0.5638],
                             [Date.UTC(2013,5,6),0.5549],
                             [Date.UTC(2013,5,7),0.5562],
                             [Date.UTC(2013,5,9),0.6574],
                             [Date.UTC(2013,5,10),0.5543],
                             [Date.UTC(2013,5,11),0.5510],
                             [Date.UTC(2013,5,12),0.5498],
                             [Date.UTC(2013,5,13),0.5477],
                             [Date.UTC(2013,5,14),0.5492],
                             [Date.UTC(2013,5,16),0.5487],
                             [Date.UTC(2013,5,17),0.5480],
                             [Date.UTC(2013,5,18),0.4466],
                             [Date.UTC(2013,5,19),0.5521],
                             [Date.UTC(2013,5,20),0.5564],
                             [Date.UTC(2013,5,21),0.5621],
                             [Date.UTC(2013,5,23),0.5630],
                             [Date.UTC(2013,5,24),0.5623],
                             [Date.UTC(2013,5,25),0.5644],
                             [Date.UTC(2013,5,26),0.5685],
                             [Date.UTC(2013,5,27),0.5671],
                             [Date.UTC(2013,5,28),0.5687],
                             [Date.UTC(2013,5,30),0.5687],
                             [Date.UTC(2013,6,1),0.5654],
                             [Date.UTC(2013,6,2),0.5705],
                             [Date.UTC(2013,6,3),0.5687],
                             [Date.UTC(2013,6,4),0.3744],
                             [Date.UTC(2013,6,5),0.5793],
                             [Date.UTC(2013,6,7),0.5804],
                             [Date.UTC(2013,6,8),0.5770],
                             [Date.UTC(2013,6,9),0.4824],
                             [Date.UTC(2013,6,10),0.5705],
                             [Date.UTC(2013,6,11),0.5635],
                             [Date.UTC(2013,6,12),0.5652],
                             [Date.UTC(2013,6,14),0.5656],
                             [Date.UTC(2013,6,15),0.5655],
                             [Date.UTC(2013,6,16),0.5598],
                             [Date.UTC(2013,6,17),0.5619],
                             [Date.UTC(2013,6,18),0.5628],
                             [Date.UTC(2013,6,19),0.5609],
                             [Date.UTC(2013,6,21),0.5599],
                             [Date.UTC(2013,6,22),0.5584],
                             [Date.UTC(2013,6,23),0.4562],
                             [Date.UTC(2013,6,24),0.4575],
                             [Date.UTC(2013,6,25),0.4531],
                             [Date.UTC(2013,6,26),0.4530],
                             [Date.UTC(2013,6,28),0.5526],
                             [Date.UTC(2013,6,29),0.5540],
                             [Date.UTC(2013,6,30),0.3540],
                             [Date.UTC(2013,6,31),0.5518],]
                     }]
        });
//当左侧菜单栏显示或隐藏时图表重绘
    $('.icon-double-angle-left').click(function(){
        if($('#sidebar-collapse i').attr('class')=='icon-double-angle-left'){
            $('#containerLine').css("width","1281px")
            $('#container').css("width","883px")
        }else{
            $('#containerLine').css("width","1141px")
            $('#container').css("width","785px")
        }

        $('#containerLine').highcharts().reflow();
        $('#container').highcharts().reflow();
    });



		</script>

<script type="text/javascript">
$(document).ready(function(){
    var get_datas = function(){
        $.ajax({
            url: '__URL__/indexdata',
            type: 'POST',
            dataType: 'json',
            async: false,
            success:function(data){
                $('#data1').html();
                get_data1(data);
                $('#data2').html();
                get_data2(data);
            }
        })
    }
    get_datas();    
    //setInterval(get_datas,5000);
}); 
function get_data1(data){
    var str1 = '<tr><td>存储型XSS攻击</td><td>2017-03-23 11:13</td></tr><tr><td>口令爆破攻击</td><td>2017-03-23 11:10</td></tr>';
    if (data.data1) {
        $.each(data.data1, function(index, value){
            str1 += '<tr><td>'+value.UgcType+'</td><td>'+value.Time+'</td></tr>';
        });
    }
    $('#data1').html(str1) ;
}
function get_data2(data){
    var str2 = '<tr><td><span class="AssetsRed" title="高危"></span>192.168.168.168</td><td>2017-03-01 10:10:10</td></tr><tr><td><span class="AssetsOrg" title="中危"></span>192.168.168.168</td><td>2017-03-01 10:10:10</td></tr><tr><td><span class="AssetsRed"></span>192.168.168.168</td><td>2017-03-01 10:10:10</td></tr><tr><td><span class="AssetsRed"></span>192.168.168.168</td><td>2017-03-01 10:10:10</td></tr><tr><td><span class="AssetsRed"></span>192.168.168.168</td><td>2017-03-01 10:10:10</td></tr>';
    /*if (data.data2) {
        $.each(data.data2, function(index, value){
            str2 += '<tr><td><span class="'+value.class+'" title="'+value.title+'"></span>'+value.ip+'</td><td>'+value.Time+'</td></tr>';
        });
    }*/
    $('#data2').html(str2) ;
}
</script>
