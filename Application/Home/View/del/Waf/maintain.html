<div class="main-content">

    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try {
                ace.settings.check('breadcrumbs', 'fixed')
            } catch (e) {
            }
        </script>

        <ul class="breadcrumb">
            <li>
                Waf管理
            </li>
            <li class="active">维护</li>
        </ul>
        <!-- .breadcrumb -->


    </div>
    <div class="col-sm-12">
        <div class="row">
            <div class="col-xs-12">
                <div class="formArea marT10">
                    <!--<a href="#" class="more">更多条件</a>-->


                        <!--
                        <label class="w70">告警等级：</label>
                        <select>
                        <option>严重</option>
                        <option>一般</option>
                        <option>提示</option>
                        </select>
                        -->
                    <form method="get" action="">
                        <!-- <a href="#" class="more">更多条件</a>-->

                        <div class=" floatLeft marL10">
                        <label class="w70">网元组：</label>
                        <select name="negroup" class="negroup">
                            <option value="">请选择</option>
                            <volist name="negrouplist" id="groups_vo">
                              <option value="{$groups_vo['id']}" 
                             <if condition="$groups_vo['id'] eq $map['negroup.id'] ">selected = "selected"</if>>
                                {$groups_vo['name']}
                              </option>
                            </volist>
                        </select>

                        <label class="w70">网元IP：</label><input type="text" name="ip" class="w100 ip">
                        
                        <label class="w70">告警源：</label>
                        <select name="source" class="source">
                            <option value="">请选择</option>
                            <volist name="source_list" id="source_list_vo" >
                                <option value="{$source_list_vo['source']}"
                                 <if condition="$source_list_vo['source'] eq $map['alarm_log.source'] ">selected = "selected"</if>>
                                 {$source_list_vo['source_name']}</option>
                            </volist>
                        </select>
<!--                         <label class="w70">告警等级：</label>
                        <select name="rank" class="rank">
                        <option value="">请选择</option>
                        <option value="1">严重</option>
                        <option value="2">一般</option>
                        <option value="3">提示</option>
                        
                        </select> -->
                        
                        <label class="w70">查询时间：</label>
                            </div>
                    <div class="input-group w300 floatLeft">
			                     <span class="input-group-addon">
			                         <i class="icon-calendar bigger-110"></i>
			                     </span>
                        <input class="form-control date-range-picker" type="text" name="date-range-picker" data-date-format="YYYY-MM-DD"
                               id="id-date-range-picker-1"/>
                    </div>
                         
                         <button class="btn btn-sm btn-primary marL10"><i class="fa fa-search"></i>查询</button>

                        
                 </form>
                </div>

                <div class="table-responsive marT10">


                    <table id="sample-table-1" class="table table-striped table-bordered table-hover">
                        <thead>
                        <tr>
                            <th>网元组</th>
                            <th>网元IP</th>
                            <th>告警源</th>
                            <th>告警内容</th>
                            <th>告警时间</th>
                            <th>状态</th>
                        </tr>
                        </thead>
                        <tbody>
                            <volist name="alarm_data" id="alarm_data_vo">
                                <tr>
                                    <!-- <td><input type="checkbox" value="{$alarm_data_vo['id']}"></td> -->
                                    <td>{$alarm_data_vo['negroup']}</td>
                                    <td>{$alarm_data_vo['ip']}</td>
                                    <td>{$alarm_data_vo['source_name']}</td>
                                    <td>{$alarm_data_vo['content']}</td>
                                    <td>{$alarm_data_vo['time']|date='Y-m-d H:i:s',###}</td>
                                    <td><if condition="$alarm_data_vo['handle_status'] eq -1"><b class="red">未处理</b><elseif condition="$alarm_data_vo['handle_status'] eq 0" />处理中<elseif condition="$alarm_data_vo['handle_status'] eq 1" /><b class="red"><b class="green">已处理</b><else />未知</if></b></td>
                                    <!-- <td><if condition="$alarm_data_vo['rank'] eq 1"><b class="red">严重</b><elseif condition="$alarm_data_vo['handle_status'] eq 1" />一般<elseif condition="$alarm_data_vo['handle_status'] eq 2" /><b class="red"><b class="green"></b><e提示lse />未知</if></b></td> -->
                                </tr>
                            </volist>
                        </tbody>
                    </table>
                </div>
                <!-- /.table-responsive -->
            </div>
            <!-- /span -->
        </div>
        <!-- /row -->
        <div class="dataTables_paginate paging_bootstrap">
            <ul class="pagination">
                {$show}
            </ul>
        </div>
    </div>
</div><!-- /.main-content -->

<script type="text/javascript">
    $('.negroup').attr('value',getParam("negroup"));
    $('.ip').attr('value',getParam("ip"));
    $('.source').attr('value',getParam("source"));
    $('.date-range-picker').attr('value',URLdecode(getParam("date-range-picker")));

    function URLdecode(sStr){
       return sStr.replace(/\+/g,' ').replace(/\%2F/g,'\/').replace(/\%20/g,''); 
    }

    function getParam(paramName)
    {
        paramValue = "";
        isFound = false;
        if (this.location.search.indexOf("?") == 0 && this.location.search.indexOf("=")>1)
        {
            arrSource = this.location.search.substring(1,this.location.search.length).split("&");
            i = 0;
            while (i < arrSource.length && !isFound)
            {
                if (arrSource[i].indexOf("=") > 0)
                {
                    if (arrSource[i].split("=")[0].toLowerCase()==paramName.toLowerCase())
                    {
                        paramValue = arrSource[i].split("=")[1];
                        isFound = true;
                    }
                }
                i++;
            }
        }
        return paramValue;
    }

    $(".more").click(function () {
        var div = $(".moreSelect");
        if (div.css("display") === "none") {
            div.show();
            $('.more').html('收起')
        } else {
            div.hide();
            $('.more').html('更多条件')
        }
        return false;
    })

</script>
<script type="text/javascript">
    $(".Ignore").click(function () {
        $("#Ignore").show();
        $("#fade").show();
        return false
    });
    $(".closePop").css("cursor", "pointer").click(function () {
        $("#Ignore").hide();
        $("#fade").hide();
    });

    jQuery(function ($) {
        $('input[name=date-range-picker]').daterangepicker({
                    locale : {
                        applyLabel: '提交',
                        cancelLabel: '取消',
                        fromLabel: '开始时间',
                        toLabel: '结束时间',
                        weekLabel: 'W',
                        customRangeLabel: 'Custom Range',
                        daysOfWeek: ['日', '一', '二', '三', '四', '五','六'],
                        monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
                        firstDay: moment.localeData()._week.dow
                    },
                    language: 'cn',}
        ).prev().on(ace.click_event, function () {
                    $(this).next().focus();
                });

    })
</script>
